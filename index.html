<!DOCTYPE html>
<html lang="ru-RU">
  <head>
    <meta charset="UTF-8" />
    <title>ITYouTubers ‚Äî —Å–æ–æ–±—â–µ—Å—Ç–≤–æ —Å–æ–∑–¥–∞—Ç–µ–ª–µ–π IT –∫–æ–Ω—Ç–µ–Ω—Ç–∞</title>
    <script src="/lib/handlebars.js"></script>

    <link rel="icon" type="image/png" href="https://ityoutubers.com/fav.png" />
    <link href="/dist/output.css" rel="stylesheet">
    <script>
      // –í–æ —Ç—ã –≤—ã–ø–∞–ª –æ—Ç —Ö—ç–Ω–¥–ª–µ–±–∞—Ä—Å, –¥–∞? :)
      Handlebars.registerHelper('humanNumber', function (value) {
        const num = parseInt(value, 10);
        const lookup = [
          { value: 1, symbol: "" },
          { value: 1e3, symbol: "k" },
          { value: 1e6, symbol: "M" },
          { value: 1e9, symbol: "G" },
          { value: 1e12, symbol: "T" },
          { value: 1e15, symbol: "P" },
          { value: 1e18, symbol: "E" }
        ];
        const rx = /\.0+$|(\.[0-9]*[1-9])0+$/;
        var item = lookup.slice().reverse().find(function(item) {
          return num >= item.value;
        });
        return item ? (num / item.value).toFixed(0).replace(rx, "$1") + item.symbol : "0";
      });

      let template = Handlebars.compile(`
      {{#each channels}}
        <div class="grid grid-cols-3 gap-8">
          <div class="col-span-1">
            <a href="https://youtube.com/channel/{{ id }}"><img class="rounded-full w-40" src="{{ snippet.thumbnails.medium.url }}" /></a> 
          </div>
          <div class="col-span-2">
            <a href="https://youtube.com/channel/{{ id }}">{{ snippet.title }}</a> 
            <p>{{ snippet.customUrl }} ‚Ä¢ {{ humanNumber statistics.subscriberCount }}</p>
            <p class="line-clamp-3">{{ snippet.description }}</p>
          </div>
        </div>
      {{/each}}
      `);

      fetch('/dist/channels-slim.json')
        .then((response) => response.json())
        .then((channels) => channels.sort((a, b) => parseInt(a.statistics.subscriberCount) > parseInt(b.statistics.subscriberCount) ? -1 : 1))
        .then((channels) => document.getElementById("channels").innerHTML = template({channels: channels}));
    </script>
  </head>
  <body>
    <div class="container mx-auto pb-20">
      <h1 class="pb-10 pt-5">
        <img style="width: 400px;" src="./ityoutubers-logo.jpg" />
      </h1>
      <p class="w-1/2 mb-20">
        ITYouTubers ‚Äî —Å–æ–æ–±—â–µ—Å—Ç–≤–æ –∫–∞–Ω–∞–ª–æ–≤ —Å IT –∫–æ–Ω—Ç–µ–Ω—Ç–æ–º. –ú—ã —Å–æ–±—Ä–∞–ª–∏—Å—å, —á—Ç–æ–±—ã —Å–¥–µ–ª–∞—Ç—å IT –∫–æ–Ω—Ç–µ–Ω—Ç –ª—É—á—à–µ –∏ –¥–æ—Å—Ç—É–ø–Ω–µ–µ. –ú–Ω–µ–Ω–∏—è —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ –Ω–∞–≤–µ—Ä–Ω—è–∫–∞ —Ä–∞—Å—Ö–æ–¥—è—Ç—Å—è –ø–æ –º–Ω–æ–≥–∏–º –≤–æ–ø—Ä–æ—Å–∞–º, –º—ã —Å—Ç–∞—Ä–∞–µ–º—Å—è —Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ IT.
      </p>

      <div id="channels" class="grid grid-cols-2 gap-8">

      </div>

      <p class="pt-5" style="margin-top: 100px;">–°–¥–µ–ª–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é üí© & ü™µ –≤ 2022</p>
    </div>

    <!-- Start of HubSpot Embed Code -->
    <script
      type="text/javascript"
      id="hs-script-loader"
      async
      defer
      src="//js.hs-scripts.com/5930551.js"
    ></script>
    <!-- End of HubSpot Embed Code -->
  </body>
</html>
